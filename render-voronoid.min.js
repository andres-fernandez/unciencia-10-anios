export function renderVoronoid(e){const t=function(e){if(l)return;const t=d3.select(this),a=t.attr("data-content-type"),n=t.attr("data-parent");d3.select(".tooltip").style("opacity","1").style("left",e.pageX-40+"px").style("top",e.pageY-135+"px").html(`<span class="tooltip-headline">${a}</span><br><span class="tooltip-data">${n}`)},a=()=>{l||d3.select(".tooltip").style("opacity",0)},n=document.getElementById("dataviz-content-display");let i=window.innerWidth,l=i<960;window.addEventListener("resize",()=>{i=window.innerWidth,l=i<960}),document.querySelector("#dataviz-voronoid-container").innerHTML="";const r=d3.select("#dataviz-voronoid-container").append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("viewBox",[0,0,364,404]).attr("id","unciencia-voronoid-dataviz").attr("title","Dataviz sobre el 10 aniversario de UNCiencia").attr("desc",()=>"Visualización realizada para difundir la producción de UNCiencia.").append("g").attr("id","unciencia-dataviz-voronoid-render").attr("transform","translate("+[2,2]+")").append("g").attr("id","render-polygons-container");!function(e,i){let o=d3.rollup(e,i,e=>e.contenttype,e=>e.serie,e=>e.uid),s=d3.hierarchy(o).sum(e=>e[1]),c=s.descendants().sort((e,t)=>t.depth-e.depth),d=new Math.seedrandom("t");console.log(d()),d3.voronoiTreemap().prng(d).clip([[330,19],[330,214.7],[330,231],[329.3,245.7],[327.1,260.2],[323.5,274.5],[318.6,288.4],[312.3,301.7],[304.7,314.3],[296,326.1],[286.1,337.1],[275.2,346.9],[263.3,355.7],[250.7,363.3],[237.4,369.6],[223.5,374.5],[209.3,378.1],[194.7,380.3],[180,381],[180,381],[165.3,380.3],[150.7,378.1],[136.5,374.5],[122.6,369.6],[109.3,363.3],[96.7,355.7],[84.8,346.9],[73.9,337.1],[64,326.1],[55.3,314.3],[47.7,301.7],[41.4,288.4],[36.5,274.5],[32.9,260.2],[30.7,245.7],[30,231],[30,214.7],[30,19],[330,19]])(s),r.selectAll("path").data(c).join("path").attr("d",e=>"M"+e.polygon.join("L")+"Z").attr("data-parent",e=>e.parent?e.parent.data[0]:"Luke, I am your father").attr("data-depth",e=>e.depth).attr("data-uid",e=>e.depth<3?null:e.data[0]).attr("data-content-type",e=>e.depth<3?null:e.parent.parent.data[0]).attr("data-value",e=>e.depth<3?null:e.data[1]).attr("class",e=>e.depth<3?"h":null).on("mousemove",t).on("mouseout",a).on("click",t=>{l&&n.scrollIntoView({behavior:"smooth"}),t.currentTarget.setAttribute("class","clicked");let a=t.currentTarget.__data__.data[0],i=e.filter(e=>e.uid==a)[0];switch(i.uid[0]){case"t":p.className="articulo",function(e){$(e);const t=e.firstparagraph.replaceAll("&#x2c;",",");f.innerHTML=`<p class="clipped">${t}</p>`,g.textContent="... Leer la nota",g.href=e.url}(i);break;case"w":let e=i.serie.includes("Mundial")?"dym-mundial":"dym";p.className=e,function(e){$(e);const t=e.description.replaceAll("&#x2c;",","),a=!!e.serie.includes("Mundial");a?f.innerHTML=`<p>${t}</p><hr><p><span style="font-weight:500;">«Dato y Mancha Mundial»</span> es un álbum con las camisetas de los 32 seleccionados que disputaron el mundial 2022 en Qatar. Cada una recupera datos curiosos y científicos del país que representa.</p>`:f.textContent=e.description.replaceAll("&#x2c;",","),g.textContent=a?"... Mirar el álbum completo":"... Ir al contenido relacionado",g.href=e.url}(i);break;default:let t=/Unciencia en la tele|Videominuto/gi.test(i.serie),a=t?"audiovisual-video":"audiovisual-podcast";p.className=a,function(e,t){if(t){y.dataset.videoId=e.url;let t=e.description;if(t){let t=e.description.replaceAll("&#x2c;",",");f.innerHTML=t.length>255?`<p class="clipped">${t}</p>`:`<p>${t}</p>`}else f.innerHTML="<p>...</p>"}else{q.classList.remove("listen"),L.textContent="00:00",M.style.width="0%",S.textContent=e.duration.slice(3);let t=e.serie;switch(!0){case t.includes("Bell"):let a=e.description.replaceAll("&#x2c;",","),n=a.length>255?'<p class="clipped">':"<p>",i=a.split("|");f.innerHTML=`${n}<span style="font-weight:500; font-style:normal;">${i[0]} |</span> ${i[1]}</p><hr><p><span style="font-weight:700; font-style:normal;">«Bell, viajera del tiempo»</span> es una serie de podcast ficcionales. Su protagonista es una joven egresada de la UNC que viaja al pasado, con su grabador y su micrófono, para conocer los objetos e historias de los museos universitarios en su contexto original.</p>`;break;case t.includes("ciudadana"):let l=e.description.replaceAll("&#x2c;",",");f.innerHTML=`<p>${l}\n</p><hr><p>La ciencia ciudadana consiste en producir conocimiento científico a través de proyectos de investigación colectiva, participativa y abierta a la comunidad. En la UNC existen numerosas experiencias, que <span style="font-weight:700; font-style:normal;">unciencia</span> recupera en este especial.</p>`;break;default:let r=e.interviews.replaceAll("&#x2c;",","),o=e.description.replaceAll("&#x2c;",",");f.innerHTML=o.length>255?`<p class="clipped">${o}</p><hr><p>${r}</p>`:`<p>${o}</p><hr><p>${r}</p>`}z.src=e.mp3,w.load()}$(e)}(i,t)}}),r.append("path").attr("id","argentina-campeon").attr("d","M100.9,66l0.4-0.8l-0.9,0.3l-0.9-0.4l0.4,1l-0.3,1l0.9-0.4l0.9,0.4L100.9,66z M98.9,68l0.4-0.8 l-0.9,0.3l-0.9-0.4l0.4,1l-0.3,1l0.9-0.4l0.9,0.4L98.9,68z M97,70l0.4-0.8l-0.9,0.3l-0.9-0.4l0.4,1l-0.3,1l0.9-0.4l0.9,0.4L97,70z");const p=document.getElementById("dataviz-content-display"),u=p.querySelector(".dataviz-post-metadata"),m=p.querySelector(".dataviz-post-image"),y=p.querySelector(".dataviz-post-video"),h=p.querySelector(".dataviz-post-video-thumbnail"),v=p.querySelector(".dataviz-post-title"),f=p.querySelector(".dataviz-post-description"),g=p.querySelector(".dataviz-post-link a"),x=p.querySelector(".dataviz-post-podcast-player"),w=p.querySelector("audio"),z=w.querySelector("source"),q=x.querySelector(".play-pause"),M=x.querySelector(".audiotrack span"),L=x.querySelector(".time span"),S=x.querySelector(".time span:nth-child(2)");function $(e){m.src=e.image,h.src=e.image,v.textContent=e.title.replaceAll("&#x2c;",","),u.textContent=`${e.serie} | ${e.year}`,y.dataset.player="off";let t=document.querySelector("iframe");t&&t.remove(),w.pause()}}(e,function(e){return d3.sum(e,e=>e.normalized)})};